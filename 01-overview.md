# 课程概况

## 为什么要学习这门课程

由于计算机体系的庞大，计算机的很多基础知识，被分成了很多独立课程。课程体系中缺乏一门独立的能够贯穿整个计算机系统的基础课程，课程彼此之前缺乏关联性和系统性。特别是一些非科班出生的IT从业人员，在一些底层的实现上显得模糊不清。学习这门课程，能让学习者对计算机的整体性有更深入、更清晰的理解。

## 学习方式

笔记学习基于blibli教程[【精校中英字幕】2015 CMU 15-213 CSAPP 深入理解计算机系统 课程视频](https://www.bilibili.com/video/BV1iW411d7hd?from=search&seid=13353650717207742800d%3Ffrom%3Dsearch&seid=13353650717207742800)及教材**深入理解计算机系统(中，第三版)**。本笔记采取每篇视频与书本相结合的方式，以视频为单位，将当期设计到书本中的概念、知识记录在一起。记录情况可能比较杂，尽量保证视频中讲师提到一些比较重要的概念都记录下来

## overview

由于第一讲中没有涉及到具体的书本知识，讲师知识很泛的讲了一些示例，以及课程的概述，组成等，而通过本篇笔记观看到该资料的人在进度上并不会与之一致，所以第一篇不做太多的讲述，仅记录一些信息。

### 抽象很好，但是不能忘记本质
多数程序员所干的工作都是抽象的，高级一点的说法就是调用系统的api，并不需要关心实际上是怎么工作的。抽象很美好，它让你的工作简单很多，只需要关心自己手上的内容就好，但是，了解计算机的本质，知道它是如何工作的，会大大提升你的工作效率。

通过漫长的计算机发展，很多的实际情况与普通人理解的不一样。原课程讲师将之称为"伟大的现实".


#### 现实1 int不是整数，float也不是真实的
举例
```gdb
40000^2^ = 1600000000
50000^2^ = ?
```

**在这门课上，你会熟系并且经常使用一个叫GDB的工具，如果你用的是mac，那么它叫lldb**

<img :src="$withBase('/images/01-1.png')">

可以看出显示的结果并不是期望的值，计算机期望的数字是32-bit的，整数运算的期望可能成立，也可能不成立

#### 现实2 你需要知道机器级编程的意义

本课程更多是关于如何获取编译器生成的汇编代码，一个c编译器，阅读并理解它，这是一种与你能够自己写汇编不同的能力

#### 现实3 内存

内存bug示例

```c
typedef struct {
	int a[2];
	double d;
} struct_t;

double fun(int i) {
	volatile struct_t s;
	s.d = 3.14;
	s.a[i] = 1073741824; /* 可能超出边界*/
}
```

```c
fun(0)  -> 3.14
fun(1)  -> 3.14
fun(2)  -> 3.1399998664856
fun(3)  -> 2.00000061035156
fun(4)  -> 3.14
fun(6)  -> Segmention fault
```

原因于数据如何在内存中布局有关，内存是如何访问的，这也是c/c++的特性之一，它不会在运行中做任何边界检查，你可以直接访问，但是操作系统会

<img :src="$withBase('/images/01-2.png')">

s.a 是int，8位，占一个内存，s.d占用2个，使用fun(2),fun(3)的时候，实际上是改变浮点数d的字节，当引用到了某个点，可能是6也可能是其他时，就修改了程序的某些状态，它被用于维护程序的运行，最有可能是记录已经分配的内存，就导致了程序的崩溃。 --- C语言不会执行边界检查，所以很容易写出非法的代码

c/c++不检查程序如何处理
- 使用其他编程语言编程，java ruby，python等
- 更严谨的编程习惯
- 使用工具检测

#### 现实4 除了渐近复杂性，还有更多性能问题

很多课程中，更加的强调使用正确的数据结构写出正确的算法，这很重要，也很正确，但是他们之中某些需要进行一些低级别的优化，你需要了解系统的运行规律，是什么让程序运行得更好或者不好

```c
void cpoyij(int src[2048][2048],int dst[2048][2048]) {
	int i,j;
	for(i=0;i<2048;i++) {
		for(j=0;j<2048;j++) {
			dst[i][j] = src[i][j];
		}
	}
}

void cpoyji(int src[2048][2048],int dst[2048][2048]) {
	int i,j;
	for(i=0;i<2048;i++) {
		for(j=0;j<2048;j++) {
			dst[j][i] = src[j][i];   /* 此处不同 */
		}
	}
}
```
第一个横向拷贝，4.81ms  第二个竖向拷贝，80ms，性能差别20倍

#### 现实5 计算机不仅是孤立运行程序，而是通过网络彼此互联的计算机


## 学术诚信问题

实际在CMU，你与任何人分享代码，无论是复制，重新输入，查看某人的代码，或者网络搜索，甚至描述别人的代码，一行一行指导别人，都是作弊行为，将会被驱逐出课程，2次作弊行为会被学校开除。虽然这里不是CMU，但是既然你想学习这门课程，相信CMU自然有他们的道理，通过独立完成作业，你的能力提升肯定是巨大的

## 建议
每个章节读3次，然后认真做练习题。

## labs

分为8个labs

0. C Programming
1. Data Lab
2. Bomb Lab
3. Attack Lab
4. Cache Lab
5. Malloc Lab
6. Shell Lab
7. Proxy Lab

因为教材是深度使用的c语言进行讲解，所以需要读者会使用c语言。按照CMU的日程表，lab0在第一章结束后就会开启，截止时间为第四节课当天。推荐教材为K&R的经典C语言教材。
